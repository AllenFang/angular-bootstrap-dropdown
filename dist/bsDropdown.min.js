!function(e,t){"use strict";var n=t.module("ng.bs.dropdown",[]);n.constant("bsDropdownCfg",{display:"DropDown",disabled:!1,divider:[],disabledItems:[]}),n.run(["$templateCache",function(e){e.put("bsDropdown/templates/defaultTemplate.html",['<div class="dropdown">','<button class="btn btn-default dropdown-toggle" type="button" id="bsDropDown" data-toggle="dropdown" aria-expanded="true">',"{{showText}}",'<span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu" aria-labelledby="bsDropDown">',"<li role='presentation' ng-repeat='item in _bsDropdownItems' ng-class='{divider:item.isDivider, disabled: item.isDisabled}'>",'<a ng-if="!item.isDivider" role="menuitem" tabindex="-1" href="#" ng-click="selectItem(item.text)">{{item.text}}</a>',"</li>","</ul>","</div>"].join("")),e.put("bsDropdown/templates/multiSelectTemplate.html",['<div class="dropdown">','<button class="btn btn-default dropdown-toggle" type="button" id="bsDropDown" data-toggle="dropdown" aria-expanded="true">',"{{showText}}",'<span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu" aria-labelledby="bsDropDown">',"<li role='presentation' ng-repeat='item in _bsDropdownItems' ng-class='{divider:item.isDivider, disabled: item.isDisabled}'>",'<a ng-if="!item.isDivider" role="menuitem" tabindex="-1" href="#" ng-click="selectItem(item.text)">','<input type="checkbox" ng-checked="item.checked"/> {{item.text}}',"</a>","</li>","</ul>","</div>"].join(""))}]),n.controller("bsDropdownController",["$scope","$element","$attrs",function(e){var n,i=this;this.init=function(d){n=d,n.$render=function(){var d=t.isDefined(e.selected);d&&n.$setViewValue(e.selected),i.$render(n.$viewValue),e.multiSelect&&(d||(e.selected=n.$viewValue),i.checkMultiOptions())}},this.checkMultiOptions=function(){for(var t=0;t<e._bsDropdownItems.length;t++){var n=e._bsDropdownItems[t];e._bsDropdownItems[t].checked=-1!=e.selected.indexOf(n.text)?!0:!1}},e.selectItem=function(t){if(e.multiSelect){var i=-1;if(-1==(i=e.selected.indexOf(t))){for(var d=[],s=0;s<e.selected.length;s++)d.push(e.selected[s]);d.push(t),e.selected=d}else{for(var d=[],s=0;s<e.selected.length;s++)s!=i&&d.push(e.selected[s]);e.selected=d}}else e.selected=t;n.$render()}}]),n.directive("bsDropdown",["bsDropdownCfg",function(e){return{scope:{bsDropdownItems:"="},require:["bsDropdown","?ngModel"],controller:"bsDropdownController",templateUrl:function(e,n){return t.isDefined(n.bsDropdownMulti)?"bsDropdown/templates/multiSelectTemplate.html":"bsDropdown/templates/defaultTemplate.html"},link:function(n,i,d,s){function o(){var e=(+new Date+Math.floor(999999*Math.random())).toString(36);i.find("#bsDropDown").attr("id",e),i.find(".dropdown-menu").attr("aria-labelledby",e),l(c),n.disabled&&i.find("button").addClass("disabled")}function l(e){n.showText=null!==e?e:c}function r(){for(var e=[],t=0,i=0;i<n.bsDropdownItems.length;i++){var d=-1!=n.divider.indexOf(i),s=-1!=n.disabledItems.indexOf(i),o=n.bsDropdownItems[i];if(d){var l=a(t++,o,!d,s),r=a(t++,null,d,!1);e.push(l),e.push(r)}else{var l=a(t++,o,d,s);e.push(l)}}return e}function a(e,t,n,i){return{_k:e,text:t,isDivider:n,isDisabled:i}}var p=s[0],b=s[1],c=t.isDefined(d.bsDropdownDisplay)?d.bsDropdownDisplay:e.display;n._bsDropdownItems=n.bsDropdownItems,n.divider=t.isDefined(d.bsDropdownDivider)?n.$eval(d.bsDropdownDivider):e.divider,n.disabledItems=t.isDefined(d.bsDropdownItemDisabled)?n.$eval(d.bsDropdownItemDisabled):e.disabledItems,n.disabled=t.isDefined(d.bsDropdownDisabled)?n.$eval(d.bsDropdownDisabled):e.disabled,n.multiSelect=t.isDefined(d.bsDropdownMulti),p.init(b),p.$render=function(e){l(e)},n._bsDropdownItems=r(),o()},restrict:"AE"}}])}(window,window.angular);